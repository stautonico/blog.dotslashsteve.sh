<!--
     This file defines how a summary of a specific post should be presented.

     This template does the following:
     1. Shows the name of the post
     2. Shows the date the post was created (from metadata in post markdown
     source)
     3. Displays a Hugo-generated summary of the post
     4. Provides a link with text Read More that points to the post, only if
     the summary is shorter than the full post.
-->

<article class="summary">
    <header>
        <h1 class="post-title"><a href='{{ .Permalink }}'> {{ .Title }}</a> </h1>
        {{ with .Params.date }}
            <span class="post-date">{{ dateFormat "Mon Jan 2, 2006" . }}</span>
        {{ end }}
    </header>

    <div class="post" >
        {{ $summary_splits := split .Summary "<!--endtoc-->" }}
        {{ if eq (len $summary_splits) 2 }}
            <!-- If that endtoc special comment is present, output only the part after that comment as Summary. -->
            {{ index $summary_splits 1 | safeHTML }}
        {{ else }}
            <!-- Print the whole Summary if endtoc special comment is not found. -->
            {{ .Summary }}
        {{ end }}
    </div>

    <!-- https://gohugo.io/content/summaries/ -->
    <!-- Show the 'Read more' link only if needed. -->
    {{ if .Truncated }}
        <a href='{{ .Permalink }}'>Read more</a>
    {{ end }}
</article>
